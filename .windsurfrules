# General Guidelines for MeetMatch Telegram Bot

## Coding Standards

### Type Annotations

* Use type annotations for all function parameters and return types.
* Utilize Python 3.10+ type hinting features like union types with `|`.
* Enforce type-checking using `mypy` for strict validation.

### Error Handling

* Implement custom exceptions as specified in `errors.py`.
* Avoid using generic exceptions; create specific error classes for different scenarios.
* Log errors with detailed context using `structlog` for effective debugging.

### Telegram Bot Specifics

* Use `python-telegram-bot`'s `ContextTypes` in handler functions.
* Ensure handlers leverage the context object for accessing bot data and user state.
* Place handler logic within the `src/bot/handlers/` directory for better organization.

## Code Quality Assurance

### Linting and Formatting

* Use `ruff` as the primary tool for linting and formatting.
* Configure `ruff` settings in `.ruff.toml` with project-specific preferences.
* Execute `ruff check .` for linting and `ruff format .` for formatting before committing.

### Testing

* Develop unit tests using Python's `unittest` framework.
* Achieve at least 80% code coverage, validated with `coverage.py`.
* Run tests with `pytest --cov=src` to generate coverage reports.

### Documentation

* Include docstrings for all public functions, classes, and modules.
* Adhere to Google or NumPy docstring conventions for consistency.
* Ensure documentation is updated with code changes to reflect current functionality.

## Project Organization

* Follow the established directory structure:
	+ `src/bot/`: Telegram command logic and core bot handlers.
	+ `src/models/`: Database models like SQLAlchemy ORM classes.
	+ `src/services/`: Business logic for operations like matching and profile management.
	+ `src/utils/`: Utility functions and helpers.
	+ `src/config.py`: Configuration management and environment variables.
	+ `tests/`: Unit and integration tests.
	+ `scripts/`: Scripts for deployment and maintenance tasks.

## Development Workflow

### Commit Guidelines

* Adhere to Conventional Commits for commit messages (e.g., `feat: add profile validation`, `fix: correct match scoring`).

### Pull Requests

* Include test coverage reports generated by `coverage.py` and upload them to Codecov.
* Update documentation to reflect changes introduced in the PR.

### Pre-Commit Hooks

* Use `pre-commit` to run `ruff`, `pylyzer`, and other checks automatically before commits.