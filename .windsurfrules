# Windsurf Rules for MeetMatch Telegram Bot

## Coding Conventions

### Type Annotations

* Rule: Use type annotations for all function parameters and return types.
* Details: Leverage Python 3.10+ type hinting features (e.g., union types with `|`).
* Enforcement: Enable strict validation with `mypy` to catch type-related issues.

### Error Handling

* Rule: Use custom exceptions defined in `errors.py`.
* Details: Avoid generic exceptions; implement specific error classes for different failure scenarios.
* Logging: Log errors with context using `structlog` to provide detailed debugging information.

### Telegram Bot Specific

* Rule: Use `python-telegram-bot`'s `ContextTypes` in handler functions.
* Details: Ensure handlers utilize the context object for accessing bot data and user state.
* Organization: Isolate handler logic in the `src/bot/handlers/` directory for modularity.

## Code Quality

### Linting and Formatting

* Rule: Use `ruff` as the primary linting and formatting tool.
* Details: Configure `ruff` via a `.ruff.toml` file with project-specific settings (e.g., line length, rule exclusions).
* Execution: Run `ruff check .` for linting and `ruff format .` for formatting before commits.

### Testing

* Rule: Write unit tests using Python's `unittest` framework.
* Coverage: Maintain a minimum of 80% code coverage, measured with `coverage.py`.
* Execution: Run tests with `pytest --cov=src` to generate coverage reports.

### Documentation

* Rule: Include docstrings for all public functions, classes, and modules.
* Details: Follow Google or NumPy docstring style for consistency.
* Maintenance: Update documentation alongside code changes to reflect current behavior.

## Project Structure

* Rule: Adhere to the established directory layout.
* Structure:
	+ `src/bot/`: Core bot handlers and Telegram command logic.
	+ `src/models/`: Database models (e.g., SQLAlchemy ORM classes).
	+ `src/services/`: Business logic for matching, profile management, etc.
	+ `src/utils/`: Helper functions and utilities.
	+ `src/config.py`: Configuration loading and environment variable management.
	+ `tests/`: Unit and integration tests.
	+ `scripts/`: Deployment and maintenance scripts.

## Development Practices

### Commits

* Use Conventional Commits for commit messages (e.g., `feat: add profile validation`, `fix: correct match scoring`).

### Pull Requests

* Include test coverage reports generated by `coverage.py` and uploaded to Codecov.
* Update documentation as needed to reflect changes introduced in the PR.

### Pre-Commit Hooks

* Install and use `pre-commit` to run `ruff`, `pylyzer`, and other checks automatically before commits.